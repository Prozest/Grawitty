using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class OrbitPath : MonoBehaviour {

    public Transform position;
    Vector3 lastPos;

    public LineRenderer lr;

    public void Start()
    {
        lastPos = position.position;
        NewOrbit();
    }

    public void FixedUpdate()
    {
        if (position.position != lastPos)
        {
            NewOrbit();
            lastPos = position.position;
        }
    }

    public void NewOrbit()
    {
        Vector3 pos = position.position;

        float radius = pos.x;
        int segments = 90;

        lr.positionCount = segments;

        float angle = 360 / segments;
        float cangle = 0;

        Vector3 point = pos;
        lr.SetPosition(0, point);

        for (int i = 1; i < segments - 1; i++)
        {
            cangle += angle;
            point = new Vector3(radius * Mathf.Cos(cangle * Mathf.Deg2Rad), 0, radius * Mathf.Sin(cangle * Mathf.Deg2Rad));
            lr.SetPosition(i, point);
        }

        lr.SetPosition(segments - 1, pos);
    }
}
